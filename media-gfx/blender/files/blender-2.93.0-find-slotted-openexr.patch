From: Bernd Waibel <waebbl-gentoo@posteo.net>
Date: Sun, 27 Jun 2021 21:45:32 +0200
Subject: [PATCH] find slotted openexr

Signed-off-by: Bernd Waibel <waebbl-gentoo@posteo.net>
---
 build_files/cmake/Modules/FindOpenEXR.cmake | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/build_files/cmake/Modules/FindOpenEXR.cmake b/build_files/cmake/Modules/FindOpenEXR.cmake
index 090f80b..a02ab9c 100644
--- a/build_files/cmake/Modules/FindOpenEXR.cmake
+++ b/build_files/cmake/Modules/FindOpenEXR.cmake
@@ -48,7 +48,7 @@ SET(_openexr_SEARCH_DIRS
 
 FIND_PATH(OPENEXR_INCLUDE_DIR
   NAMES
-    OpenEXR/ImfXdr.h
+    OpenEXR-2/ImfXdr.h
   HINTS
     ${_openexr_SEARCH_DIRS}
   PATH_SUFFIXES
@@ -64,7 +64,7 @@ IF(OPENEXR_INCLUDE_DIR)
         OpenEXRConfig.h
       PATHS
         "${OPENEXR_INCLUDE_DIR}"
-        "${OPENEXR_INCLUDE_DIR}/OpenEXR"
+        "${OPENEXR_INCLUDE_DIR}/OpenEXR-2"
       NO_DEFAULT_PATH
     )
 
@@ -104,7 +104,7 @@ FOREACH(COMPONENT ${_openexr_FIND_COMPONENTS})
     HINTS
       ${_openexr_SEARCH_DIRS}
     PATH_SUFFIXES
-      lib64 lib
+      lib64 lib lib64/OpenEXR-2 lib/OpenEXR-2
     )
   LIST(APPEND _openexr_LIBRARIES "${OPENEXR_${UPPERCOMPONENT}_LIBRARY}")
 ENDFOREACH()
@@ -120,7 +120,7 @@ FIND_PACKAGE_HANDLE_STANDARD_ARGS(OpenEXR  DEFAULT_MSG
 IF(OPENEXR_FOUND)
   SET(OPENEXR_LIBRARIES ${_openexr_LIBRARIES})
   # Both include paths are needed because of dummy OSL headers mixing #include <OpenEXR/foo.h> and #include <foo.h> :(
-  SET(OPENEXR_INCLUDE_DIRS ${OPENEXR_INCLUDE_DIR} ${OPENEXR_INCLUDE_DIR}/OpenEXR)
+  SET(OPENEXR_INCLUDE_DIRS ${OPENEXR_INCLUDE_DIR} ${OPENEXR_INCLUDE_DIR}/OpenEXR-2)
 ENDIF()
 
 MARK_AS_ADVANCED(
-- 
2.32.0

